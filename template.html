<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<!--Generated by code-insight, visit http://github.com/xudifsd/code-insight for more information-->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>code-insight</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript">
		var code_insight = {};
		code_insight.database = %s;/*this is for fprintf in c*/
		code_insight.createFileBlock = function(object){
			var rtn = $('<div id="file"></div>').append($('<span/>').attr("file_name", object["file_name"]).text(object["file_name"]));
			return rtn;
		};
		code_insight.createDefinitionBlock = function(object){	/*generate definition's div block*/
			var rtn = $('<div id="definition"/>').attr("function_name", object["function_name"]);
			rtn.append($('<span id="lineno"/>').text(object["lineno"]));
			rtn.append($('<span id="return_value"/>').text(object["return_value"]));
			rtn.append($('<span id="function_name"/>').text(object["function_name"]));
			rtn.append($('<span id="args_list"/>').text(object["args_list"]));
			return rtn;
		};
		code_insight.findDefinition = function(functionName){
			var rtn = [];
			for (var i = 0; i < code_insight.database.length; i++){
				for(var j = 0; j < code_insight.database[i]['definition_list'].length; j++){
					if (functionName === code_insight.database[i]['definition_list'][j]['function_name'])
						rtn.push(code_insight.database[i]['definition_list'][j]);
				}
			}
			return rtn;
		};
		$(document).ready(function(){
			$('div#loading').hide();
			for(var i = 0; i < code_insight.database.length; i++){	/*display all file at the beginning*/
				$('div#content').append(code_insight.createFileBlock(code_insight.database[i]));
			}
			$('button#searchButton').click(function(){
				$('div#content').empty();
				$('div#loading').show();
				var definitionObjects = code_insight.findDefinition($('input#searchTerm').val());
				if (definitionObjects.length === 0){
					$('div#content').append($('<div id="sorry"/>').html('<span style="font-color:red;">No function named "'+ $('input#searchTerm').val() +'" found</span>'));
				} else {
					for (var i = 0; i < definitionObjects.length; i++){
						$('div#content').append(code_insight.createDefinitionBlock(definitionObjects[i]));
					}
				}
				$('div#loading').hide();
			});
		});
	</script>
</head>
<body>
<div id="topbar"><input id="searchTerm" style="width:200px;height:15px;"></input><button id="searchButton">search function</button></div>
<hr/>
<div id="content"></div>
<div id="loading"><span style="font-size:30px;">Loading ...</span></div>
</body>
</html>
